(()=>{"use strict";const e=document.body,t=document.getElementById("theme-toggle"),o=document.getElementById("theme-icon"),n=document.getElementById("toast"),a=localStorage.getItem("ls_theme_mode")||"dark";function s(s){const a=s==="light";e.classList.toggle("light-mode",a),o.src=a?"./images/sun.png":"./images/moon.png",t.setAttribute("aria-pressed",String(a)),n?.classList.toggle("light-mode",a),localStorage.setItem("ls_theme_mode",s)}s(a),t.addEventListener("click",()=>{const o=e.classList.contains("light-mode")?"dark":"light";s(o),t.animate([{transform:"scale(1)"},{transform:"scale(0.92)"},{transform:"scale(1)"}],{duration:220,easing:"ease-out"})});const i=document.querySelector(".header-banner .banner-img");if(i){let e=!1,t=window.innerHeight;const o=()=>{const o=i.getBoundingClientRect().top,n=Math.min(Math.max(o/t,-1),1);i.style.transform=`translateY(${n*-25}px) scale(1.04)`,e=!1};window.addEventListener("scroll",()=>{e||(requestAnimationFrame(o),e=!0)}),window.addEventListener("resize",()=>{t=window.innerHeight,requestAnimationFrame(o)}),requestAnimationFrame(o)}const d=document.querySelectorAll(".reveal, [data-scroll-reveal], .fade-left, .fade-right");if(d.length){const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(t.target.classList.add("visible"),e.unobserve(t.target))})},{threshold:.1});d.forEach(t=>e.observe(t))}const r="./images/offline-image.png";document.querySelectorAll("img").forEach(e=>{e.addEventListener("error",()=>{e.dataset.fallback||(e.dataset.fallback="1",e.src=r)})});const l=document.getElementById("gallery"),c=document.getElementById("lightbox"),m=document.getElementById("lightbox-img");function u(t="AcciÃ³n completada",o="success"){const n=document.getElementById("toast");if(!n)return;const a=n.querySelector(".toast-text");a.textContent=t,n.classList.remove("success","error"),n.classList.add(o),n.classList.add("toast-show"),setTimeout(()=>{n.classList.remove("toast-show")},3e3)}l&&c&&m&&(l.addEventListener("click",t=>{if(t.target.tagName==="IMG"){m.src=t.target.src,c.classList.remove("hidden"),c.setAttribute("aria-hidden","false"),e.style.overflow="hidden"}}),c.addEventListener("click",t=>{t.target===c&&(c.classList.add("hidden"),c.setAttribute("aria-hidden","true"),e.style.overflow="")}),document.addEventListener("keydown",t=>{if(t.key==="Escape"){c.classList.add("hidden"),c.setAttribute("aria-hidden","true"),e.style.overflow=""}}));const p=document.getElementById("contact-form");p&&p.addEventListener("submit",async e=>{e.preventDefault();const t=new FormData(p),o=t.get("name")||"No especificado",n=t.get("email")||"No especificado",a=t.get("message")||"No especificado";try{const e=await fetch("/.netlify/functions/send-telegram",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o,email:n,message:a})});if(!e.ok)throw new Error(`Error en el servidor: ${e.status}`);u("Mensaje enviado correctamente","success"),p.reset()}catch(e){u("Hubo un error. Intenta nuevamente.","error"),console.error("Error al enviar formulario:",e)}})})();